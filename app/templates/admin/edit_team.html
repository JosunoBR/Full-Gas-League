{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow border-info">
            <div class="card-header bg-dark border-info d-flex justify-content-between align-items-center">
                <h4 class="mb-0 text-info fw-bold">Gerenciar Equipe</h4>
                {% if team.logo_url %}
                <img src="{{ url_for('static', filename='uploads/' + team.logo_url) }}" width="50" height="50" class="rounded-circle border border-info">
                {% endif %}
            </div>
            <div class="card-body bg-dark">
                <form method="POST" enctype="multipart/form-data">
                    
                    <div class="form-check form-switch mb-4 p-3 bg-secondary rounded border border-info">
                        <input class="form-check-input" type="checkbox" name="ativa" id="ativaCheck" {% if team.ativa %}checked{% endif %}>
                        <label class="form-check-label text-white fw-bold ms-2" for="ativaCheck">
                            EQUIPE ATIVA NA TEMPORADA ATUAL
                        </label>
                        <div class="form-text text-white-50 ms-1">Desmarque para arquivar esta equipe sem excluir (ela sumirá do ranking).</div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-white">Nome</label>
                            <input type="text" name="nome" class="form-control bg-secondary text-white border-0" value="{{ team.nome }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-white">Grid</label>
                            <select name="grid" class="form-select bg-secondary text-white border-0" required>
                                <option value="ELITE" {% if team.grid == 'ELITE' %}selected{% endif %}>Elite</option>
                                <option value="ADVANCED" {% if team.grid == 'ADVANCED' %}selected{% endif %}>Advanced</option>
                                <option value="INITIAL" {% if team.grid == 'INITIAL' %}selected{% endif %}>Initial</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label text-white">Alterar Foto</label>
                        <input type="file" name="foto" class="form-control bg-secondary text-white border-0">
                    </div>

                    <hr class="border-secondary">
                    <h5 class="text-white-50 mb-3">Contrato de Pilotos</h5>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-white">Piloto 1</label>
                            <select name="pilot1" class="form-select bg-secondary text-white border-0">
                                <option value="">-- Vago --</option>
                                {% for p in pilots %}
                                    <option value="{{ p.id }}" {% if p.team_id == team.id and loop.index0 == 0 %}selected{% endif %}>
                                        {{ p.nome_real }} ({{ p.nickname }})
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-white">Piloto 2</label>
                            <select name="pilot2" class="form-select bg-secondary text-white border-0">
                                <option value="">-- Vago --</option>
                                {% for p in pilots %}
                                    <option value="{{ p.id }}" {% if p.team_id == team.id and loop.index0 > 0 %}selected{% endif %}>
                                        {{ p.nome_real }} ({{ p.nickname }})
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="d-grid mt-3">
                        <button type="submit" class="btn btn-info fw-bold text-dark">SALVAR ALTERAÇÕES</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}